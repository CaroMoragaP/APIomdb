<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Insert title here</title>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-giJF6kkoqNQ00vy+HMDP7azOuL0xtbfIcaT9wjKHr8RbDVddVHyTfAAsrekwKmP1" crossorigin="anonymous">
</head>
<body>
	<h3 class="text-center mt-5">Javier Carrascal Morales</h3>
	
	<h1 class="text-center mt-4">Lista peliculas de <span th:text="${usuario.nombre}"></span></h1>
		
	<div class="container">
		<div class=" row justify-content-center align-item-center mt-3 mx-5">
			<table class="table table-hover align-item-center text-center">
			    <thead>
				    <tr>
				        <th>Titulo</th>
				        <th>Director</th>
				        <th>Año</th>
						<th>Duración</th>
				        <th>Poster</th>
				        
				 <!-- Estas 2 columnas se deben visualizar sólo si se accede desde botón "Películas compartidas" de verPeliUser.html  -->
				        <th>Amigo</th>
				        <th>Valorar</th>
				    </tr>
			    </thead>
			    <tbody>
				    <tr th:each="item : ${peliculas}">
				        <td ><h4><span th:text="${item.Title}"></h4>
							<form th:action="@{/peli/verPelisUsuario}" th:object="${peli}" th:method="get">
								<input type="hidden"  th:value="${item.imdbID}"  th:name="imdbID" th:id="imdbID" />
								<input class="btn btn-dark" type="submit" value="i"/>
							</form>
				        </td>
				        <td th:text="${item.director}"></td>
				        <td th:text="${item.year}"></td>
						<td th:text="${item.runtime}"></td>
				        <td><img class="w-25" th:src="${item.poster}"></td>
				        
				    <!-- Estas 2 columnas se debe visualizar sólo si se accede desde botón "Películas compartidas" de verPeliUser.html  -->
				        <td></td>
				        <td>
					        <div class="rating ms-3">
					            <input type="radio" id="star5" name="rating" value="5" onclick="habilitarGuardar()" />
					            <label for="star5">★</label>
					
					            <input type="radio" id="star4" name="rating" value="4" onclick="habilitarGuardar()" />
					            <label for="star4">★</label>
					
					            <input type="radio" id="star3" name="rating" value="3" onclick="habilitarGuardar()" />
					            <label for="star3">★</label>
					
					            <input type="radio" id="star2" name="rating" value="2" onclick="habilitarGuardar()" />
					            <label for="star2">★</label>
					
					            <input type="radio" id="star1" name="rating" value="1" onclick="habilitarGuardar()" />
					            <label for="star1">★</label>
					        </div>
					        
					        <!-- Al seleccionar una valoración, se debe guardar en la base de datos en la tabla PelisCompartidas -->
				        </td>
				    </tr>  
			    </tbody>
			</table>
		</div>
	</div>
	
	<div class="text-center mt-4">
		<a th:href="@{/peli/buscar}">Buscar otra película</a>
	</div>
	
		<script>
		function habilitarGuardar(){
		    document.getElementById("btnGuardar").disabled = false;
		}
	</script>	
		
</body>
</html>